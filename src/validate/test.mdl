
dt = 0.2e-6
it = 20000
efg = 10000

n=100

TIME_STEP = dt
TIME_STEP_MAX = dt*1.01
ITERATIONS = it
EFFECTOR_GRID_DENSITY = efg
RADIAL_SUBDIVISIONS = 256
RADIAL_DIRECTIONS = 16384

DEFINE_MOLECULES {
  ACh {
    DIFFUSION_CONSTANT = 2.2e-6
  }
  Glu {
    DIFFUSION_CONSTANT = 2.1e-6
  }
  Glw {
    DIFFUSION_CONSTANT = 0
  }
}

DEFINE_SURFACE_CLASSES {
  surf_a {
    TRANSPARENT = ACh
  }
  surf_b {
    TRANSPARENT = Glu
    ABSORPTIVE = ACh
  }
}

DEFINE_REACTIONS {
  ACh + Glu -> ACh + Glu + Glw [1e8]
}

DEFINE_RELEASE_PATTERN pat1 {
  DELAY = 0
  RELEASE_INTERVAL = 4.0e-3
  TRAIN_INTERVAL = 1
  TRAIN_DURATION = 20.0e-3
  NUMBER_OF_TRAINS = 1
}

DEFINE_RELEASE_PATTERN pat2 {
  DELAY = 1.5e-3
  RELEASE_INTERVAL = 3.0e-3
  TRAIN_INTERVAL = 1
  TRAIN_DURATION = 20.0e-3
  NUMBER_OF_TRAINS = 1
}

ACh_release_site SPHERICAL_RELEASE_SITE {
  LOCATION = [0.09,0.09,0.09]
  MOLECULE = ACh
  NUMBER_TO_RELEASE = n
  SITE_DIAMETER = 0.000000001
  RELEASE_PATTERN = pat1
}

Glu_release_site SPHERICAL_RELEASE_SITE {
  LOCATION = [-0.09,-0.09,-0.09]
  MOLECULE = Glu
  NUMBER_TO_RELEASE = n
  SITE_DIAMETER = 0.00001
  RELEASE_PATTERN = pat1
}

box BOX {
  CORNERS = [-0.1, -0.1, -0.1] , [0.1,0.1,0.1]
  DEFINE_SURFACE_REGIONS {
    REGION reg1 {
      ELEMENT_LIST = [TOP,BOTTOM]
    }
  }
  SET_SURFACE_CLASSES {
    REGION reg1 {
      CLASS = surf_a
    }
  }
}
/*
poly POLYGON_LIST {
  VERTEX_LIST {
    [0,0,0]
    [1,0,0]
    [1,1,0]
  }
  ELEMENT_CONNECTIONS {
    [0,1,2]
    [0,2,1]
  }
}
*/
INSTANTIATE foo OBJECT {
  ACh_release_site OBJECT ACh_release_site {}
  Glu_release_site OBJECT Glu_release_site {}
  box OBJECT box {}
/*  poly OBJECT poly {}*/
}

INCLUDE_FILE = "test_include.mdl"

/*
  printf("a = %g\n",a)
*/

